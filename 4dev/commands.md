# Справочник по командам для разработки

Этот документ содержит основные команды, используемые в процессе разработки, сгруппированные по назначению.

---

### 1. Настройка и Управление Окружением

```bash
# Создание нового виртуального окружения в папке 'venv'
python3 -m venv venv

# Активация виртуального окружения (для Linux/macOS)
source venv/bin/activate

# Установка всех зависимостей проекта из файла requirements.txt
pip install -r requirements.txt
```

### 2. Запуск Приложения

```bash
# Запустить процесс индексации из корневой директории проекта
python -m app.core.rag

# Запуск веб-сервера Uvicorn в режиме разработки.
# --reload: автоматически перезапускает сервер при изменении кода.
uvicorn app.main:app --reload
```

---

### 3. Тестирование (Pytest)

```bash
# Запуск всех тестов, кроме тех, что помечены маркером 'ai' (т.е. без реальных вызовов AI API).
pytest -m "not ai"

# Запуск только тестов, которые требуют реального вызова AI API (помечены маркером 'ai').
pytest -m "ai"

# Запуск тестов с флагом -s, который выводит в консоль все print() из кода. Полезно для отладки.
pytest -s

# Запуск тестов 'ai' с выводом print() в консоль.
pytest -s -m "ai"
```

---

### 4. Управление Базой Данных

#### Локальная БД (Docker)

#### Векторная БД (ChromaDB)
```bash
# ПОЛНОЕ УДАЛЕНИЕ локальной векторной базы данных.
# Внимание: эта команда безвозвратно удалит все векторы.
rm -rf chroma_db/

# Создание и наполнение векторной базы данных из документов в app/knowledge_base
python -m app.core.rag
```


#### Миграции (Alembic)
```bash
# Автоматически сгенерировать новый файл миграции на основе изменений в моделях SQLAlchemy.
alembic revision --autogenerate -m "Краткое описание изменений"

# Применить все доступные миграции до последней версии (head).
alembic upgrade head

# Откатить последнюю примененную миграцию.
alembic downgrade -1
```

#### Наполнение и Сброс


#### Резервное копирование (Backup)

---

### 5. Сетевые Утилиты
